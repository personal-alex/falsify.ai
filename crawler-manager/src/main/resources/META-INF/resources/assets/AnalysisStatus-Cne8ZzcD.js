import{o as H,A as v,g as N}from"./primevue-COZmI4QV.js";import{s as ee}from"./index-CDzoV1Ol.js";import{s as te}from"./index-B87idtjP.js";import{c as se,_ as ae}from"./index-DZVWbUD3.js";import{M as le,r as s,B as i,o as ie,P as ne,h as U,v as o,i as e,d as C,e as R,s as n,N as l,A as r,t as a,f as b}from"./vendor-Mr6oR_SG.js";const oe={class:"analysis-status"},re={class:"grid mb-4"},ce={class:"col-12 md:col-6 lg:col-3"},de={class:"flex align-items-center justify-content-between"},ue={class:"flex align-items-center mt-2"},ve={class:"col-12 md:col-6 lg:col-3"},me={class:"flex align-items-center justify-content-between"},xe={class:"text-2xl font-bold text-900 mb-1"},pe={class:"flex align-items-center mt-2"},fe={class:"text-600 text-xs font-medium"},ge={class:"col-12 md:col-6 lg:col-3"},_e={class:"flex align-items-center justify-content-between"},he={class:"text-2xl font-bold text-900 mb-1"},ye={class:"col-12 md:col-6 lg:col-3"},be={class:"flex align-items-center justify-content-between"},we={class:"text-2xl font-bold text-900 mb-1"},He={class:"flex align-items-center mt-2"},Ae={class:"flex align-items-center justify-content-between w-full"},Ee={class:"flex align-items-center"},Te={class:"flex align-items-center mr-3"},De={class:"text-sm text-600"},Se={class:"grid"},Le={class:"col-12 md:col-6"},ke={class:"system-detail-item"},Me={class:"detail-value"},Ne={class:"system-detail-item"},Ue={class:"detail-value"},Ce={class:"system-detail-item"},Re={class:"detail-value"},Ye={class:"col-12 md:col-6"},Ie={class:"system-detail-item"},je={class:"system-detail-item"},Ge={class:"detail-value"},Pe={class:"system-detail-item"},Be={key:0,"data-testid":"loading-spinner"},$e={class:"text-center p-6"},Ve={class:"flex align-items-center"},ze={class:"text-sm"},Je={class:"text-center"},Fe={class:"flex align-items-center justify-content-between w-full"},Oe={class:"text-sm text-600"},We=le({__name:"AnalysisStatus",setup(qe){const{showToast:Y,handleApiError:I}=se(),m=s(!0),f=s(!1),g=s(null),x=s(null),A=s(!0),c=s("UNKNOWN"),E=s(0),T=s(0),d=s(0),D=s(0),j=s("http://localhost:8082"),S=s("Never"),L=s("Unknown"),p=s(0),k=s(0),_=s("Unknown");let h=null;const G=i(()=>{switch(c.value){case"HEALTHY":return"text-green-500";case"DEGRADED":return"text-orange-500";case"UNHEALTHY":return"text-red-500";default:return"text-600"}}),P=i(()=>{switch(c.value){case"HEALTHY":return"bg-green-100 text-green-600";case"DEGRADED":return"bg-orange-100 text-orange-600";case"UNHEALTHY":return"bg-red-100 text-red-600";default:return"bg-gray-100 text-gray-600"}}),B=i(()=>{switch(c.value){case"HEALTHY":return"pi pi-check-circle";case"DEGRADED":return"pi pi-exclamation-triangle";case"UNHEALTHY":return"pi pi-times-circle";default:return"pi pi-question-circle"}}),$=i(()=>{switch(c.value){case"HEALTHY":return"Operational";case"DEGRADED":return"Issues detected";case"UNHEALTHY":return"Service down";default:return"Status unknown"}}),V=i(()=>{switch(c.value){case"HEALTHY":return"text-green-500";case"DEGRADED":return"text-orange-500";case"UNHEALTHY":return"text-red-500";default:return"text-600"}}),z=i(()=>{switch(c.value){case"HEALTHY":return"pi pi-arrow-up text-green-500";case"DEGRADED":return"pi pi-minus text-orange-500";case"UNHEALTHY":return"pi pi-arrow-down text-red-500";default:return"pi pi-minus text-600"}}),J=i(()=>d.value<1e3?"pi pi-arrow-up text-green-500":d.value<3e3?"pi pi-minus text-orange-500":"pi pi-arrow-down text-red-500"),F=i(()=>d.value<1e3?"text-green-500":d.value<3e3?"text-orange-500":"text-red-500"),O=i(()=>d.value<1e3?"Fast":d.value<3e3?"Moderate":"Slow"),W=i(()=>p.value<5?"text-green-500":p.value<15?"text-orange-500":"text-red-500"),q=i(()=>{switch(_.value){case"Valid":return"text-green-500";case"Warning":return"text-orange-500";case"Invalid":return"text-red-500";default:return"text-600"}}),K=i(()=>{if(!x.value)return"Never";const t=new Date().getTime()-x.value.getTime(),y=Math.floor(t/1e3);return y<60?`${y}s ago`:y<3600?`${Math.floor(y/60)}m ago`:x.value.toLocaleString()}),w=async()=>{try{g.value=null,m.value=!0,await Q(),x.value=new Date,Y.success("Status Loaded","Analysis system status updated successfully")}catch(u){console.error("Failed to load analysis status:",u),g.value=u instanceof Error?u.message:"Unknown error occurred",I(u,"Load analysis status")}finally{m.value=!1}},Q=async()=>{await new Promise(u=>setTimeout(u,1e3));try{if((await fetch("/api/prediction-analysis/health",{method:"GET",headers:{Accept:"application/json"}})).ok)c.value="HEALTHY",d.value=Math.floor(Math.random()*500)+200,p.value=Math.floor(Math.random()*3),_.value="Valid";else throw new Error("Service unavailable")}catch{c.value="UNKNOWN",d.value=0,p.value=0,_.value="Unknown"}E.value=Math.floor(Math.random()*10),T.value=Math.floor(Math.random()*3),D.value=Math.floor(Math.random()*2e3)+1e3,S.value=new Date().toLocaleString(),L.value="2h 34m",k.value=Math.floor(Math.random()*1e3)+500},M=async()=>{f.value=!0;try{await w()}finally{f.value=!1}},X=()=>{h=setInterval(()=>{!m.value&&!f.value&&M()},3e4)},Z=()=>{h&&(clearInterval(h),h=null)};return ie(async()=>{await w(),X()}),ne(()=>{Z()}),(u,t)=>(b(),U("div",oe,[o(l(H),{class:"mb-4"},{header:n(()=>t[0]||(t[0]=[e("div",{class:"flex align-items-center"},[e("i",{class:"pi pi-chart-bar mr-2 text-primary"}),e("span",{class:"font-semibold text-lg"},"Prediction Analysis System Status")],-1)])),default:n(()=>[t[1]||(t[1]=e("div",{class:"text-center"},[e("div",{class:"text-600 text-xl"},"Monitor prediction analysis service health and performance")],-1))]),_:1,__:[1]}),e("div",re,[e("div",ce,[o(l(v),{class:"status-card"},{content:n(()=>[e("div",de,[e("div",null,[e("div",{class:r(["text-2xl font-bold mb-1",G.value])},a(c.value),3),t[2]||(t[2]=e("div",{class:"text-600 text-sm"},"Service Status",-1))]),e("div",{class:r(["status-icon",P.value])},[e("i",{class:r(B.value)},null,2)],2)]),e("div",ue,[e("i",{class:r([z.value,"text-xs mr-1"])},null,2),e("span",{class:r(["text-xs font-medium",V.value])},a($.value),3)])]),_:1})]),e("div",ve,[o(l(v),{class:"status-card"},{content:n(()=>[e("div",me,[e("div",null,[e("div",xe,a(E.value),1),t[3]||(t[3]=e("div",{class:"text-600 text-sm"},"Queue Size",-1))]),t[4]||(t[4]=e("div",{class:"status-icon bg-blue-100 text-blue-600"},[e("i",{class:"pi pi-list"})],-1))]),e("div",pe,[t[5]||(t[5]=e("i",{class:"pi pi-clock text-600 text-xs mr-1"},null,-1)),e("span",fe,a(D.value)+"ms avg",1)])]),_:1})]),e("div",ge,[o(l(v),{class:"status-card"},{content:n(()=>[e("div",_e,[e("div",null,[e("div",he,a(T.value),1),t[6]||(t[6]=e("div",{class:"text-600 text-sm"},"Active Jobs",-1))]),t[7]||(t[7]=e("div",{class:"status-icon bg-orange-100 text-orange-600"},[e("i",{class:"pi pi-cog"})],-1))]),t[8]||(t[8]=e("div",{class:"flex align-items-center mt-2"},[e("i",{class:"pi pi-play text-green-500 text-xs mr-1"}),e("span",{class:"text-green-500 text-xs font-medium"},"Processing")],-1))]),_:1})]),e("div",ye,[o(l(v),{class:"status-card"},{content:n(()=>[e("div",be,[e("div",null,[e("div",we,a(d.value)+"ms",1),t[9]||(t[9]=e("div",{class:"text-600 text-sm"},"Response Time",-1))]),t[10]||(t[10]=e("div",{class:"status-icon bg-purple-100 text-purple-600"},[e("i",{class:"pi pi-stopwatch"})],-1))]),e("div",He,[e("i",{class:r([J.value,"text-xs mr-1"])},null,2),e("span",{class:r(["text-xs font-medium",F.value])},a(O.value),3)])]),_:1})])]),o(l(H),{class:"mb-4"},{header:n(()=>[e("div",Ae,[t[11]||(t[11]=e("div",{class:"flex align-items-center"},[e("i",{class:"pi pi-info-circle mr-2"}),e("span",{class:"font-semibold"},"System Details")],-1)),e("div",Ee,[e("div",Te,[e("i",{class:r(["pi pi-circle-fill mr-1",A.value?"text-green-500":"text-red-500"])},null,2),e("span",De,a(A.value?"Connected":"Disconnected"),1)]),o(l(N),{icon:"pi pi-refresh",label:"Refresh",size:"small",loading:f.value,onClick:M,"data-testid":"refresh-button"},null,8,["loading"])])])]),default:n(()=>[e("div",Se,[e("div",Le,[e("div",ke,[t[12]||(t[12]=e("div",{class:"detail-label"},"Service URL",-1)),e("div",Me,a(j.value),1)]),e("div",Ne,[t[13]||(t[13]=e("div",{class:"detail-label"},"Last Health Check",-1)),e("div",Ue,a(S.value),1)]),e("div",Ce,[t[14]||(t[14]=e("div",{class:"detail-label"},"Uptime",-1)),e("div",Re,a(L.value),1)])]),e("div",Ye,[e("div",Ie,[t[15]||(t[15]=e("div",{class:"detail-label"},"Error Rate",-1)),e("div",{class:r(["detail-value",W.value])},a(p.value)+"%",3)]),e("div",je,[t[16]||(t[16]=e("div",{class:"detail-label"},"Total Jobs Processed",-1)),e("div",Ge,a(k.value),1)]),e("div",Pe,[t[17]||(t[17]=e("div",{class:"detail-label"},"Configuration Status",-1)),e("div",{class:r(["detail-value",q.value])},a(_.value),3)])])])]),_:1}),m.value?(b(),U("div",Be,[o(l(v),null,{content:n(()=>[e("div",$e,[o(l(te)),t[18]||(t[18]=e("div",{class:"mt-3 text-600"},"Loading analysis system status...",-1))])]),_:1})])):g.value?(b(),C(l(v),{key:1,class:"error-card"},{content:n(()=>[o(l(ee),{severity:"error",closable:!1,class:"mb-3"},{default:n(()=>[e("div",Ve,[t[20]||(t[20]=e("i",{class:"pi pi-exclamation-triangle mr-2"},null,-1)),e("div",null,[t[19]||(t[19]=e("div",{class:"font-medium"},"Failed to load analysis system status",-1)),e("div",ze,a(g.value),1)])])]),_:1}),e("div",Je,[o(l(N),{icon:"pi pi-refresh",label:"Retry",severity:"secondary",onClick:w,"data-testid":"retry-button"})])]),_:1})):R("",!0),x.value&&!m.value?(b(),C(l(H),{key:2,class:"mt-4"},{header:n(()=>[e("div",Fe,[e("span",Oe," Last updated: "+a(K.value),1),t[21]||(t[21]=e("div",{class:"flex align-items-center"},[e("i",{class:"pi pi-clock mr-1 text-400"}),e("span",{class:"text-xs text-400"},"Auto-refresh enabled")],-1))])]),_:1})):R("",!0)]))}}),tt=ae(We,[["__scopeId","data-v-7944ad48"]]);export{tt as default};
