const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DZVWbUD3.js","assets/vendor-Mr6oR_SG.js","assets/primevue-COZmI4QV.js","assets/index-DOsmz9FX.css"])))=>i.map(i=>d[i]);
import{u as Jt,_ as Ct,a as Yt,b as qt,A as J,H as Qt}from"./index-DZVWbUD3.js";import{B as tt,j as et,p as Ft,m as Zt,q as Ht,r as yt,t as Gt,z as $t,C as Xt,K as lt,v as te,V as Lt,u as Ut,w as ee,Q as ct,g as L,o as dt,y as ut,_ as Rt}from"./primevue-COZmI4QV.js";import{s as Mt}from"./index-B87idtjP.js";import{s as Ot}from"./index-CDzoV1Ol.js";import{s as wt}from"./index-CdxwA4cm.js";import{h as b,f as u,c as z,m as E,j as pt,p as F,e as B,i as t,d as O,k as vt,s as $,A as N,F as It,D as se,M as Tt,r as A,B as T,o as zt,P as jt,w as Nt,z as H,v as h,N as p,t as f}from"./vendor-Mr6oR_SG.js";import{s as ae}from"./index-DY9hXYNa.js";import{s as ne}from"./index-CMl7L9aA.js";import{s as re}from"./index-BpsDegm3.js";import{J as ie}from"./JobHistory-DvKQfOan.js";var oe=`
    .p-tabs {
        display: flex;
        flex-direction: column;
    }

    .p-tablist {
        display: flex;
        position: relative;
    }

    .p-tabs-scrollable > .p-tablist {
        overflow: hidden;
    }

    .p-tablist-viewport {
        overflow-x: auto;
        overflow-y: hidden;
        scroll-behavior: smooth;
        scrollbar-width: none;
        overscroll-behavior: contain auto;
    }

    .p-tablist-viewport::-webkit-scrollbar {
        display: none;
    }

    .p-tablist-tab-list {
        position: relative;
        display: flex;
        background: dt('tabs.tablist.background');
        border-style: solid;
        border-color: dt('tabs.tablist.border.color');
        border-width: dt('tabs.tablist.border.width');
    }

    .p-tablist-content {
        flex-grow: 1;
    }

    .p-tablist-nav-button {
        all: unset;
        position: absolute !important;
        flex-shrink: 0;
        inset-block-start: 0;
        z-index: 2;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: dt('tabs.nav.button.background');
        color: dt('tabs.nav.button.color');
        width: dt('tabs.nav.button.width');
        transition:
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        box-shadow: dt('tabs.nav.button.shadow');
        outline-color: transparent;
        cursor: pointer;
    }

    .p-tablist-nav-button:focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.nav.button.focus.ring.shadow');
        outline: dt('tabs.nav.button.focus.ring.width') dt('tabs.nav.button.focus.ring.style') dt('tabs.nav.button.focus.ring.color');
        outline-offset: dt('tabs.nav.button.focus.ring.offset');
    }

    .p-tablist-nav-button:hover {
        color: dt('tabs.nav.button.hover.color');
    }

    .p-tablist-prev-button {
        inset-inline-start: 0;
    }

    .p-tablist-next-button {
        inset-inline-end: 0;
    }

    .p-tablist-prev-button:dir(rtl),
    .p-tablist-next-button:dir(rtl) {
        transform: rotate(180deg);
    }

    .p-tab {
        flex-shrink: 0;
        cursor: pointer;
        user-select: none;
        position: relative;
        border-style: solid;
        white-space: nowrap;
        gap: dt('tabs.tab.gap');
        background: dt('tabs.tab.background');
        border-width: dt('tabs.tab.border.width');
        border-color: dt('tabs.tab.border.color');
        color: dt('tabs.tab.color');
        padding: dt('tabs.tab.padding');
        font-weight: dt('tabs.tab.font.weight');
        transition:
            background dt('tabs.transition.duration'),
            border-color dt('tabs.transition.duration'),
            color dt('tabs.transition.duration'),
            outline-color dt('tabs.transition.duration'),
            box-shadow dt('tabs.transition.duration');
        margin: dt('tabs.tab.margin');
        outline-color: transparent;
    }

    .p-tab:not(.p-disabled):focus-visible {
        z-index: 1;
        box-shadow: dt('tabs.tab.focus.ring.shadow');
        outline: dt('tabs.tab.focus.ring.width') dt('tabs.tab.focus.ring.style') dt('tabs.tab.focus.ring.color');
        outline-offset: dt('tabs.tab.focus.ring.offset');
    }

    .p-tab:not(.p-tab-active):not(.p-disabled):hover {
        background: dt('tabs.tab.hover.background');
        border-color: dt('tabs.tab.hover.border.color');
        color: dt('tabs.tab.hover.color');
    }

    .p-tab-active {
        background: dt('tabs.tab.active.background');
        border-color: dt('tabs.tab.active.border.color');
        color: dt('tabs.tab.active.color');
    }

    .p-tabpanels {
        background: dt('tabs.tabpanel.background');
        color: dt('tabs.tabpanel.color');
        padding: dt('tabs.tabpanel.padding');
        outline: 0 none;
    }

    .p-tabpanel:focus-visible {
        box-shadow: dt('tabs.tabpanel.focus.ring.shadow');
        outline: dt('tabs.tabpanel.focus.ring.width') dt('tabs.tabpanel.focus.ring.style') dt('tabs.tabpanel.focus.ring.color');
        outline-offset: dt('tabs.tabpanel.focus.ring.offset');
    }

    .p-tablist-active-bar {
        z-index: 1;
        display: block;
        position: absolute;
        inset-block-end: dt('tabs.active.bar.bottom');
        height: dt('tabs.active.bar.height');
        background: dt('tabs.active.bar.background');
        transition: 250ms cubic-bezier(0.35, 0, 0.25, 1);
    }
`,le={root:function(e){var r=e.props;return["p-tabs p-component",{"p-tabs-scrollable":r.scrollable}]}},ce=tt.extend({name:"tabs",style:oe,classes:le}),de={name:"BaseTabs",extends:et,props:{value:{type:[String,Number],default:void 0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},showNavigators:{type:Boolean,default:!0},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1}},style:ce,provide:function(){return{$pcTabs:this,$parentInstance:this}}},Kt={name:"Tabs",extends:de,inheritAttrs:!1,emits:["update:value"],data:function(){return{d_value:this.value}},watch:{value:function(e){this.d_value=e}},methods:{updateValue:function(e){this.d_value!==e&&(this.d_value=e,this.$emit("update:value",e))},isVertical:function(){return this.orientation==="vertical"}}};function ue(a,e,r,c,m,l){return u(),b("div",E({class:a.cx("root")},a.ptmi("root")),[z(a.$slots,"default")],16)}Kt.render=ue;var ve={root:"p-tablist",content:function(e){var r=e.instance;return["p-tablist-content",{"p-tablist-viewport":r.$pcTabs.scrollable}]},tabList:"p-tablist-tab-list",activeBar:"p-tablist-active-bar",prevButton:"p-tablist-prev-button p-tablist-nav-button",nextButton:"p-tablist-next-button p-tablist-nav-button"},pe=tt.extend({name:"tablist",classes:ve}),be={name:"BaseTabList",extends:et,props:{},style:pe,provide:function(){return{$pcTabList:this,$parentInstance:this}}},Vt={name:"TabList",extends:be,inheritAttrs:!1,inject:["$pcTabs"],data:function(){return{isPrevButtonEnabled:!1,isNextButtonEnabled:!0}},resizeObserver:void 0,watch:{showNavigators:function(e){e?this.bindResizeObserver():this.unbindResizeObserver()},activeValue:{flush:"post",handler:function(){this.updateInkBar()}}},mounted:function(){var e=this;setTimeout(function(){e.updateInkBar()},150),this.showNavigators&&(this.updateButtonState(),this.bindResizeObserver())},updated:function(){this.showNavigators&&this.updateButtonState()},beforeUnmount:function(){this.unbindResizeObserver()},methods:{onScroll:function(e){this.showNavigators&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick:function(){var e=this.$refs.content,r=this.getVisibleButtonWidths(),c=yt(e)-r,m=Math.abs(e.scrollLeft),l=c*.8,x=m-l,k=Math.max(x,0);e.scrollLeft=Lt(e)?-1*k:k},onNextButtonClick:function(){var e=this.$refs.content,r=this.getVisibleButtonWidths(),c=yt(e)-r,m=Math.abs(e.scrollLeft),l=c*.8,x=m+l,k=e.scrollWidth-c,v=Math.min(x,k);e.scrollLeft=Lt(e)?-1*v:v},bindResizeObserver:function(){var e=this;this.resizeObserver=new ResizeObserver(function(){return e.updateButtonState()}),this.resizeObserver.observe(this.$refs.list)},unbindResizeObserver:function(){var e;(e=this.resizeObserver)===null||e===void 0||e.unobserve(this.$refs.list),this.resizeObserver=void 0},updateInkBar:function(){var e=this.$refs,r=e.content,c=e.inkbar,m=e.tabs;if(c){var l=$t(r,'[data-pc-name="tab"][data-p-active="true"]');this.$pcTabs.isVertical()?(c.style.height=Xt(l)+"px",c.style.top=lt(l).top-lt(m).top+"px"):(c.style.width=te(l)+"px",c.style.left=lt(l).left-lt(m).left+"px")}},updateButtonState:function(){var e=this.$refs,r=e.list,c=e.content,m=c.scrollTop,l=c.scrollWidth,x=c.scrollHeight,k=c.offsetWidth,v=c.offsetHeight,y=Math.abs(c.scrollLeft),P=[yt(c),Gt(c)],_=P[0],D=P[1];this.$pcTabs.isVertical()?(this.isPrevButtonEnabled=m!==0,this.isNextButtonEnabled=r.offsetHeight>=v&&parseInt(m)!==x-D):(this.isPrevButtonEnabled=y!==0,this.isNextButtonEnabled=r.offsetWidth>=k&&parseInt(y)!==l-_)},getVisibleButtonWidths:function(){var e=this.$refs,r=e.prevButton,c=e.nextButton,m=0;return this.showNavigators&&(m=((r==null?void 0:r.offsetWidth)||0)+((c==null?void 0:c.offsetWidth)||0)),m}},computed:{templates:function(){return this.$pcTabs.$slots},activeValue:function(){return this.$pcTabs.d_value},showNavigators:function(){return this.$pcTabs.scrollable&&this.$pcTabs.showNavigators},prevButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},dataP:function(){return Ht({scrollable:this.$pcTabs.scrollable})}},components:{ChevronLeftIcon:ae,ChevronRightIcon:Zt},directives:{ripple:Ft}},fe=["data-p"],he=["aria-label","tabindex"],me=["data-p"],ge=["aria-orientation"],xe=["aria-label","tabindex"];function ye(a,e,r,c,m,l){var x=pt("ripple");return u(),b("div",E({ref:"list",class:a.cx("root"),"data-p":l.dataP},a.ptmi("root")),[l.showNavigators&&m.isPrevButtonEnabled?F((u(),b("button",E({key:0,ref:"prevButton",type:"button",class:a.cx("prevButton"),"aria-label":l.prevButtonAriaLabel,tabindex:l.$pcTabs.tabindex,onClick:e[0]||(e[0]=function(){return l.onPrevButtonClick&&l.onPrevButtonClick.apply(l,arguments)})},a.ptm("prevButton"),{"data-pc-group-section":"navigator"}),[(u(),O(vt(l.templates.previcon||"ChevronLeftIcon"),E({"aria-hidden":"true"},a.ptm("prevIcon")),null,16))],16,he)),[[x]]):B("",!0),t("div",E({ref:"content",class:a.cx("content"),onScroll:e[1]||(e[1]=function(){return l.onScroll&&l.onScroll.apply(l,arguments)}),"data-p":l.dataP},a.ptm("content")),[t("div",E({ref:"tabs",class:a.cx("tabList"),role:"tablist","aria-orientation":l.$pcTabs.orientation||"horizontal"},a.ptm("tabList")),[z(a.$slots,"default"),t("span",E({ref:"inkbar",class:a.cx("activeBar"),role:"presentation","aria-hidden":"true"},a.ptm("activeBar")),null,16)],16,ge)],16,me),l.showNavigators&&m.isNextButtonEnabled?F((u(),b("button",E({key:1,ref:"nextButton",type:"button",class:a.cx("nextButton"),"aria-label":l.nextButtonAriaLabel,tabindex:l.$pcTabs.tabindex,onClick:e[2]||(e[2]=function(){return l.onNextButtonClick&&l.onNextButtonClick.apply(l,arguments)})},a.ptm("nextButton"),{"data-pc-group-section":"navigator"}),[(u(),O(vt(l.templates.nexticon||"ChevronRightIcon"),E({"aria-hidden":"true"},a.ptm("nextIcon")),null,16))],16,xe)),[[x]]):B("",!0)],16,fe)}Vt.render=ye;var we={root:function(e){var r=e.instance,c=e.props;return["p-tab",{"p-tab-active":r.active,"p-disabled":c.disabled}]}},$e=tt.extend({name:"tab",classes:we}),_e={name:"BaseTab",extends:et,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:$e,provide:function(){return{$pcTab:this,$parentInstance:this}}},_t={name:"Tab",extends:_e,inheritAttrs:!1,inject:["$pcTabs","$pcTabList"],methods:{onFocus:function(){this.$pcTabs.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(e){switch(e.code){case"ArrowRight":this.onArrowRightKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(e);break}},onArrowRightKey:function(e){var r=this.findNextTab(e.currentTarget);r?this.changeFocusedTab(e,r):this.onHomeKey(e),e.preventDefault()},onArrowLeftKey:function(e){var r=this.findPrevTab(e.currentTarget);r?this.changeFocusedTab(e,r):this.onEndKey(e),e.preventDefault()},onHomeKey:function(e){var r=this.findFirstTab();this.changeFocusedTab(e,r),e.preventDefault()},onEndKey:function(e){var r=this.findLastTab();this.changeFocusedTab(e,r),e.preventDefault()},onPageDownKey:function(e){this.scrollInView(this.findLastTab()),e.preventDefault()},onPageUpKey:function(e){this.scrollInView(this.findFirstTab()),e.preventDefault()},onEnterKey:function(e){this.changeActiveValue(),e.preventDefault()},findNextTab:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=r?e:e.nextElementSibling;return c?ct(c,"data-p-disabled")||ct(c,"data-pc-section")==="activebar"?this.findNextTab(c):$t(c,'[data-pc-name="tab"]'):null},findPrevTab:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=r?e:e.previousElementSibling;return c?ct(c,"data-p-disabled")||ct(c,"data-pc-section")==="activebar"?this.findPrevTab(c):$t(c,'[data-pc-name="tab"]'):null},findFirstTab:function(){return this.findNextTab(this.$pcTabList.$refs.tabs.firstElementChild,!0)},findLastTab:function(){return this.findPrevTab(this.$pcTabList.$refs.tabs.lastElementChild,!0)},changeActiveValue:function(){this.$pcTabs.updateValue(this.value)},changeFocusedTab:function(e,r){ee(r),this.scrollInView(r)},scrollInView:function(e){var r;e==null||(r=e.scrollIntoView)===null||r===void 0||r.call(e,{block:"nearest"})}},computed:{active:function(){var e;return Ut((e=this.$pcTabs)===null||e===void 0?void 0:e.d_value,this.value)},id:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.$id,"_tab_").concat(this.value)},ariaControls:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.$id,"_tabpanel_").concat(this.value)},attrs:function(){return E(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.active?this.$pcTabs.tabindex:-1,role:"tab","aria-selected":this.active,"aria-controls":this.ariaControls,"data-pc-name":"tab","data-p-disabled":this.disabled,"data-p-active":this.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.active}}},dataP:function(){return Ht({active:this.active})}},directives:{ripple:Ft}};function ke(a,e,r,c,m,l){var x=pt("ripple");return a.asChild?z(a.$slots,"default",{key:1,dataP:l.dataP,class:N(a.cx("root")),active:l.active,a11yAttrs:l.a11yAttrs,onClick:l.onClick}):F((u(),O(vt(a.as),E({key:0,class:a.cx("root"),"data-p":l.dataP,onClick:l.onClick},l.attrs),{default:$(function(){return[z(a.$slots,"default")]}),_:3},16,["class","data-p","onClick"])),[[x]])}_t.render=ke;var Ce={root:"p-tabpanels"},Te=tt.extend({name:"tabpanels",classes:Ce}),Se={name:"BaseTabPanels",extends:et,props:{},style:Te,provide:function(){return{$pcTabPanels:this,$parentInstance:this}}},Wt={name:"TabPanels",extends:Se,inheritAttrs:!1};function Be(a,e,r,c,m,l){return u(),b("div",E({class:a.cx("root"),role:"presentation"},a.ptmi("root")),[z(a.$slots,"default")],16)}Wt.render=Be;var Ae={root:function(e){var r=e.instance;return["p-tabpanel",{"p-tabpanel-active":r.active}]}},Ee=tt.extend({name:"tabpanel",classes:Ae}),Pe={name:"BaseTabPanel",extends:et,props:{value:{type:[String,Number],default:void 0},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1},header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean},style:Ee,provide:function(){return{$pcTabPanel:this,$parentInstance:this}}},kt={name:"TabPanel",extends:Pe,inheritAttrs:!1,inject:["$pcTabs"],computed:{active:function(){var e;return Ut((e=this.$pcTabs)===null||e===void 0?void 0:e.d_value,this.value)},id:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.$id,"_tabpanel_").concat(this.value)},ariaLabelledby:function(){var e;return"".concat((e=this.$pcTabs)===null||e===void 0?void 0:e.$id,"_tab_").concat(this.value)},attrs:function(){return E(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){var e;return{id:this.id,tabindex:(e=this.$pcTabs)===null||e===void 0?void 0:e.tabindex,role:"tabpanel","aria-labelledby":this.ariaLabelledby,"data-pc-name":"tabpanel","data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function De(a,e,r,c,m,l){var x,k;return l.$pcTabs?(u(),b(It,{key:1},[a.asChild?z(a.$slots,"default",{key:1,class:N(a.cx("root")),active:l.active,a11yAttrs:l.a11yAttrs}):(u(),b(It,{key:0},[!((x=l.$pcTabs)!==null&&x!==void 0&&x.lazy)||l.active?F((u(),O(vt(a.as),E({key:0,class:a.cx("root")},l.attrs),{default:$(function(){return[z(a.$slots,"default")]}),_:3},16,["class"])),[[se,(k=l.$pcTabs)!==null&&k!==void 0&&k.lazy?!0:l.active]]):B("",!0)],64))],64)):z(a.$slots,"default",{key:0})}kt.render=De;const Le={class:"metrics-component"},Re={class:"flex justify-content-between align-items-center mb-4"},Ie={class:"flex align-items-center gap-2"},Ne={key:0,class:"flex align-items-center justify-content-center p-4"},Fe={key:1,class:"text-center p-4"},He={class:"flex align-items-center"},Ue={class:"text-sm"},Me={key:2,class:"text-center p-4"},Oe={class:"text-600"},ze={class:"text-sm"},je={key:3,class:"metrics-content"},Ke={class:"grid mb-4"},Ve={class:"col-12 md:col-3"},We={class:"metric-card surface-card p-3 border-round shadow-1"},Je={class:"flex align-items-center justify-content-between"},Ye={class:"text-900 text-2xl font-semibold"},qe={class:"flex align-items-center mt-1"},Qe={class:"col-12 md:col-3"},Ze={class:"metric-card surface-card p-3 border-round shadow-1"},Ge={class:"flex align-items-center justify-content-between"},Xe={class:"text-900 text-2xl font-semibold"},ts={class:"flex align-items-center mt-1"},es={class:"col-12 md:col-3"},ss={class:"metric-card surface-card p-3 border-round shadow-1"},as={class:"flex align-items-center justify-content-between"},ns={class:"text-900 text-2xl font-semibold"},rs={class:"flex align-items-center mt-1"},is={class:"col-12 md:col-3"},os={class:"metric-card surface-card p-3 border-round shadow-1"},ls={class:"flex align-items-center justify-content-between"},cs={class:"text-900 text-2xl font-semibold"},ds={class:"flex align-items-center mt-1"},us={class:"grid"},vs={class:"col-12 lg:col-6"},ps={class:"chart-container",style:{height:"300px"}},bs={key:1,class:"flex align-items-center justify-content-center h-full text-600"},fs={class:"col-12 lg:col-6"},hs={class:"chart-container",style:{height:"300px"}},ms={key:1,class:"flex align-items-center justify-content-center h-full text-600"},gs={class:"col-12 lg:col-6"},xs={class:"chart-container",style:{height:"300px"}},ys={key:1,class:"flex align-items-center justify-content-center h-full text-600"},ws={class:"col-12 lg:col-6"},$s={class:"chart-container",style:{height:"300px"}},_s={key:1,class:"flex align-items-center justify-content-center h-full text-600"},ks={key:0,class:"text-center mt-4"},Cs={class:"text-600"},Ts=Tt({__name:"MetricsComponent",props:{crawlerId:{},autoRefresh:{type:Boolean,default:!0},refreshInterval:{default:3e4}},setup(a){const e=a,r=A(null),c=A(!1),m=A(null),l=A(null),x=A("1h");let k=null;const v=[{label:"1 Hour",value:"1h"},{label:"6 Hours",value:"6h"},{label:"24 Hours",value:"1d"},{label:"7 Days",value:"7d"},{label:"30 Days",value:"30d"}],y=T(()=>r.value&&(r.value.articlesProcessed>0||r.value.errorCount>0||r.value.trendsData&&r.value.trendsData.length>0)),P=Jt(),_=()=>{const s=P.isDarkMode;return{primary:s?"#60a5fa":"#3b82f6",success:s?"#4ade80":"#22c55e",warning:s?"#fbbf24":"#f59e0b",danger:s?"#f87171":"#ef4444",info:s?"#38bdf8":"#0ea5e9",surface:s?"#374151":"#f8fafc",text:s?"#f9fafb":"#1f2937",textSecondary:s?"#d1d5db":"#6b7280"}},D=T(()=>{var d;if(!((d=r.value)!=null&&d.trendsData)||r.value.trendsData.length===0)return null;const s=r.value.trendsData,n=_();return{labels:s.map(g=>V(g.timestamp)),datasets:[{label:"Articles Processed",data:s.map(g=>g.articlesProcessed),borderColor:n.primary,backgroundColor:`${n.primary}20`,fill:!0,tension:.4,pointBackgroundColor:n.primary,pointBorderColor:n.primary,pointHoverBackgroundColor:n.primary,pointHoverBorderColor:"#ffffff",pointRadius:4,pointHoverRadius:6}]}}),Y=T(()=>{var d;if(!((d=r.value)!=null&&d.trendsData)||r.value.trendsData.length===0)return null;const s=r.value.trendsData,n=_();return{labels:s.map(g=>V(g.timestamp)),datasets:[{label:"Success Rate (%)",data:s.map(g=>g.successRate),borderColor:n.success,backgroundColor:`${n.success}20`,fill:!0,tension:.4,pointBackgroundColor:n.success,pointBorderColor:n.success,pointHoverBackgroundColor:n.success,pointHoverBorderColor:"#ffffff",pointRadius:4,pointHoverRadius:6}]}}),R=T(()=>{var d;if(!((d=r.value)!=null&&d.trendsData)||r.value.trendsData.length===0)return null;const s=r.value.trendsData,n=_();return{labels:s.map(g=>V(g.timestamp)),datasets:[{label:"Processing Time (ms)",data:s.map(g=>g.processingTimeMs),borderColor:n.warning,backgroundColor:`${n.warning}20`,fill:!0,tension:.4,pointBackgroundColor:n.warning,pointBorderColor:n.warning,pointHoverBackgroundColor:n.warning,pointHoverBorderColor:"#ffffff",pointRadius:4,pointHoverRadius:6}]}}),K=T(()=>{var d;if(!((d=r.value)!=null&&d.trendsData)||r.value.trendsData.length===0)return null;const s=r.value.trendsData,n=_();return{labels:s.map(g=>V(g.timestamp)),datasets:[{label:"Error Count",data:s.map(g=>g.errorCount),backgroundColor:`${n.danger}CC`,borderColor:n.danger,borderWidth:2,borderRadius:4,borderSkipped:!1,hoverBackgroundColor:n.danger,hoverBorderColor:n.danger}]}}),w=()=>{const s=_();return{responsive:!0,maintainAspectRatio:!1,animation:{duration:750,easing:"easeInOutQuart"},plugins:{legend:{display:!0,position:"top",align:"end",labels:{usePointStyle:!0,pointStyle:"circle",padding:20,color:s.text,font:{size:12,family:"Inter, system-ui, sans-serif"}}},tooltip:{enabled:!0,mode:"index",intersect:!1,backgroundColor:s.surface,titleColor:s.text,bodyColor:s.text,borderColor:s.primary,borderWidth:1,cornerRadius:8,displayColors:!0,padding:12,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},callbacks:{title:n=>xt(n[0].label)}}},scales:{x:{display:!0,grid:{display:!1},ticks:{color:s.textSecondary,font:{size:11}}},y:{display:!0,beginAtZero:!0,grid:{color:`${s.textSecondary}20`,drawBorder:!1},ticks:{color:s.textSecondary,font:{size:11}}}},interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{line:{borderWidth:3},point:{hoverBorderWidth:3}}}},q=T(()=>({...w(),plugins:{...w().plugins,tooltip:{...w().plugins.tooltip,callbacks:{...w().plugins.tooltip.callbacks,label:s=>`Articles: ${U(s.parsed.y)}`}}}})),bt=T(()=>({...w(),scales:{...w().scales,y:{...w().scales.y,max:100,ticks:{...w().scales.y.ticks,callback:s=>`${s}%`}}},plugins:{...w().plugins,tooltip:{...w().plugins.tooltip,callbacks:{...w().plugins.tooltip.callbacks,label:s=>`Success Rate: ${rt(s.parsed.y)}`}}}})),ft=T(()=>({...w(),plugins:{...w().plugins,tooltip:{...w().plugins.tooltip,callbacks:{...w().plugins.tooltip.callbacks,label:s=>`Processing Time: ${it(s.parsed.y)}`}}}})),ht=T(()=>({...w(),plugins:{...w().plugins,tooltip:{...w().plugins.tooltip,callbacks:{...w().plugins.tooltip.callbacks,label:s=>`Errors: ${U(s.parsed.y)}`}}}})),j=async()=>{try{c.value=!0,m.value=null;const{ApiService:s}=await Rt(async()=>{const{ApiService:d}=await import("./index-DZVWbUD3.js").then(g=>g.i);return{ApiService:d}},__vite__mapDeps([0,1,2,3]));let n;if(x.value!=="1h"){const d=mt(x.value);n=await s.getCrawlerMetricsHistory(e.crawlerId,d)}else n=await s.getCrawlerMetrics(e.crawlerId);r.value=n,l.value=new Date}catch(s){console.error("Failed to load metrics:",s),m.value=s instanceof Error?s.message:"Failed to load metrics"}finally{c.value=!1}},mt=s=>{switch(s){case"1h":return 1;case"6h":return 6;case"1d":return 24;case"7d":return 168;case"30d":return 720;default:return 24}},st=async()=>{await j()},gt=()=>{j()},I=s=>{try{const n=document.querySelector(".chart-container canvas");if(!n){console.warn("Chart canvas not found for export");return}const d=document.createElement("a");d.download=`${e.crawlerId}-${s}-${x.value}-${new Date().toISOString().split("T")[0]}.png`,d.href=n.toDataURL("image/png"),d.click()}catch(n){console.error("Failed to export chart:",n)}},at=()=>{["articles","success-rate","processing-time","error-count"].forEach((n,d)=>{setTimeout(()=>{I(n)},d*500)})},Q=()=>{e.autoRefresh&&e.refreshInterval>0&&(k=setInterval(()=>{c.value||j()},e.refreshInterval))},nt=()=>{k&&(clearInterval(k),k=null)},U=s=>s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}K`:s.toString(),rt=s=>`${s.toFixed(1)}%`,it=s=>s<1e3?`${s}ms`:s<6e4?`${(s/1e3).toFixed(1)}s`:`${(s/6e4).toFixed(1)}m`,ot=s=>{const n=typeof s=="string"?new Date(s):s,g=new Date().getTime()-n.getTime(),W=Math.floor(g/1e3),G=Math.floor(W/60);return W<60?`${W}s ago`:G<60?`${G}m ago`:n.toLocaleString()},V=s=>{const n=new Date(s),d=x.value;return d==="1h"||d==="6h"?n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):d==="1d"?n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):n.toLocaleDateString([],{month:"short",day:"numeric"})},xt=s=>s,M=(s,n=!1)=>{if(s==null)return"pi pi-minus";const d=n?s<0:s>0,g=n?s>0:s<0;return d?"pi pi-arrow-up":g?"pi pi-arrow-down":"pi pi-minus"},Z=(s,n=!1)=>{if(s==null)return"text-600";const d=n?s<0:s>0,g=n?s>0:s<0;return d?"text-green-500":g?"text-red-500":"text-600"},o=s=>{if(s==null)return"No change";const n=Math.abs(s),d=s>0?"+":"";return n<1?`${d}${(s*100).toFixed(1)}%`:`${d}${s.toFixed(1)}`},i=s=>s>=95?"success-rate-excellent":s>=85?"success-rate-good":s>=70?"success-rate-warning":"success-rate-poor";let C=null;const S=async()=>{try{const{getWebSocketService:s}=await Rt(async()=>{const{getWebSocketService:d}=await import("./index-DZVWbUD3.js").then(g=>g.w);return{getWebSocketService:d}},__vite__mapDeps([0,1,2,3]));C=s().onMetricsUpdate(d=>{d.crawlerId===e.crawlerId&&r.value&&(r.value.articlesProcessed=d.metrics.articlesProcessed,r.value.successRate=d.metrics.successRate,r.value.averageProcessingTimeMs=d.metrics.averageProcessingTime,r.value.errorCount=d.metrics.errorCount,l.value=new Date)})}catch(s){console.warn("Failed to setup WebSocket listeners:",s)}};return zt(()=>{j(),Q(),S()}),jt(()=>{nt(),C&&C()}),Nt(()=>e.crawlerId,()=>{j()}),Nt(()=>e.autoRefresh,s=>{s?Q():nt()}),(s,n)=>{var g,W,G,St,Bt,At,Et,Pt,Dt;const d=pt("tooltip");return u(),b("div",Le,[t("div",Re,[n[5]||(n[5]=t("h5",{class:"flex align-items-center m-0"},[t("i",{class:"pi pi-chart-line mr-2"}),H(" Metrics ")],-1)),t("div",Ie,[h(p(ne),{modelValue:x.value,"onUpdate:modelValue":n[0]||(n[0]=X=>x.value=X),options:v,optionLabel:"label",optionValue:"value",placeholder:"Select time range",class:"w-10rem",onChange:gt},null,8,["modelValue"]),F(h(p(L),{icon:"pi pi-refresh",class:"p-button-text p-button-sm",loading:c.value,onClick:st},null,8,["loading"]),[[d,"Refresh metrics",void 0,{top:!0}]]),F(h(p(L),{icon:"pi pi-download",class:"p-button-text p-button-sm",onClick:at,disabled:!y.value},null,8,["disabled"]),[[d,"Export charts",void 0,{top:!0}]])])]),c.value&&!r.value?(u(),b("div",Ne,[h(p(Mt),{size:"small"}),n[6]||(n[6]=t("span",{class:"ml-2 text-600"},"Loading metrics...",-1))])):m.value?(u(),b("div",Fe,[h(p(Ot),{severity:"error",closable:!1},{default:$(()=>[t("div",He,[n[8]||(n[8]=t("i",{class:"pi pi-exclamation-triangle mr-2"},null,-1)),t("div",null,[n[7]||(n[7]=t("div",{class:"font-medium"},"Failed to load metrics",-1)),t("div",Ue,f(m.value),1)])])]),_:1}),h(p(L),{icon:"pi pi-refresh",label:"Retry",class:"p-button-sm mt-2",onClick:st})])):!r.value||!y.value?(u(),b("div",Me,[t("div",Oe,[n[9]||(n[9]=t("i",{class:"pi pi-chart-line text-4xl mb-3"},null,-1)),n[10]||(n[10]=t("div",{class:"text-lg font-medium"},"No metrics data available",-1)),t("div",ze,f(l.value?`Last updated: ${ot(l.value)}`:"No data collected yet"),1)])])):(u(),b("div",je,[t("div",Ke,[t("div",Ve,[t("div",We,[t("div",Je,[t("div",null,[n[11]||(n[11]=t("div",{class:"text-600 text-sm mb-1"},"Articles Processed",-1)),t("div",Ye,f(U(r.value.articlesProcessed)),1),t("div",qe,[t("i",{class:N([M((g=r.value.trends)==null?void 0:g.articlesProcessed),"text-sm mr-1"])},null,2),t("span",{class:N([Z((W=r.value.trends)==null?void 0:W.articlesProcessed),"text-sm font-medium"])},f(o((G=r.value.trends)==null?void 0:G.articlesProcessed)),3)])]),n[12]||(n[12]=t("div",{class:"metric-icon"},[t("i",{class:"pi pi-file text-2xl text-blue-500"})],-1))])])]),t("div",Qe,[t("div",Ze,[t("div",Ge,[t("div",null,[n[13]||(n[13]=t("div",{class:"text-600 text-sm mb-1"},"Success Rate",-1)),t("div",Xe,f(rt(r.value.successRate)),1),t("div",ts,[h(p(re),{value:r.value.successRate,class:N(["w-full",i(r.value.successRate)]),style:{height:"4px"}},null,8,["value","class"])])]),n[14]||(n[14]=t("div",{class:"metric-icon"},[t("i",{class:"pi pi-check-circle text-2xl text-green-500"})],-1))])])]),t("div",es,[t("div",ss,[t("div",as,[t("div",null,[n[15]||(n[15]=t("div",{class:"text-600 text-sm mb-1"},"Avg Processing Time",-1)),t("div",ns,f(it(r.value.averageProcessingTimeMs)),1),t("div",rs,[t("i",{class:N([M((St=r.value.trends)==null?void 0:St.averageProcessingTime,!0),"text-sm mr-1"])},null,2),t("span",{class:N([Z((Bt=r.value.trends)==null?void 0:Bt.averageProcessingTime,!0),"text-sm font-medium"])},f(o((At=r.value.trends)==null?void 0:At.averageProcessingTime)),3)])]),n[16]||(n[16]=t("div",{class:"metric-icon"},[t("i",{class:"pi pi-clock text-2xl text-orange-500"})],-1))])])]),t("div",is,[t("div",os,[t("div",ls,[t("div",null,[n[17]||(n[17]=t("div",{class:"text-600 text-sm mb-1"},"Error Count",-1)),t("div",cs,f(U(r.value.errorCount)),1),t("div",ds,[t("i",{class:N([M((Et=r.value.trends)==null?void 0:Et.errorCount,!0),"text-sm mr-1"])},null,2),t("span",{class:N([Z((Pt=r.value.trends)==null?void 0:Pt.errorCount,!0),"text-sm font-medium"])},f(o((Dt=r.value.trends)==null?void 0:Dt.errorCount)),3)])]),n[18]||(n[18]=t("div",{class:"metric-icon"},[t("i",{class:"pi pi-exclamation-triangle text-2xl text-red-500"})],-1))])])])]),t("div",us,[t("div",vs,[h(p(dt),{class:"chart-panel",toggleable:!0},{header:$(()=>n[19]||(n[19]=[t("div",{class:"flex align-items-center"},[t("i",{class:"pi pi-chart-line mr-2 text-primary"}),t("span",{class:"font-semibold"},"Articles Processed Over Time")],-1)])),icons:$(()=>[F(h(p(L),{icon:"pi pi-download",class:"p-button-text p-button-sm",onClick:n[1]||(n[1]=X=>I("articles"))},null,512),[[d,"Export chart",void 0,{top:!0}]])]),default:$(()=>[t("div",ps,[D.value?(u(),O(p(ut),{key:0,type:"line",data:D.value,options:q.value,class:"chart-responsive"},null,8,["data","options"])):(u(),b("div",bs,n[20]||(n[20]=[t("i",{class:"pi pi-chart-line mr-2"},null,-1),H(" No chart data available ",-1)])))])]),_:1})]),t("div",fs,[h(p(dt),{class:"chart-panel",toggleable:!0},{header:$(()=>n[21]||(n[21]=[t("div",{class:"flex align-items-center"},[t("i",{class:"pi pi-chart-bar mr-2 text-green-500"}),t("span",{class:"font-semibold"},"Success Rate Trend")],-1)])),icons:$(()=>[F(h(p(L),{icon:"pi pi-download",class:"p-button-text p-button-sm",onClick:n[2]||(n[2]=X=>I("success-rate"))},null,512),[[d,"Export chart",void 0,{top:!0}]])]),default:$(()=>[t("div",hs,[Y.value?(u(),O(p(ut),{key:0,type:"line",data:Y.value,options:bt.value,class:"chart-responsive"},null,8,["data","options"])):(u(),b("div",ms,n[22]||(n[22]=[t("i",{class:"pi pi-chart-bar mr-2"},null,-1),H(" No chart data available ",-1)])))])]),_:1})]),t("div",gs,[h(p(dt),{class:"chart-panel",toggleable:!0},{header:$(()=>n[23]||(n[23]=[t("div",{class:"flex align-items-center"},[t("i",{class:"pi pi-clock mr-2 text-orange-500"}),t("span",{class:"font-semibold"},"Processing Time Trend")],-1)])),icons:$(()=>[F(h(p(L),{icon:"pi pi-download",class:"p-button-text p-button-sm",onClick:n[3]||(n[3]=X=>I("processing-time"))},null,512),[[d,"Export chart",void 0,{top:!0}]])]),default:$(()=>[t("div",xs,[R.value?(u(),O(p(ut),{key:0,type:"line",data:R.value,options:ft.value,class:"chart-responsive"},null,8,["data","options"])):(u(),b("div",ys,n[24]||(n[24]=[t("i",{class:"pi pi-clock mr-2"},null,-1),H(" No chart data available ",-1)])))])]),_:1})]),t("div",ws,[h(p(dt),{class:"chart-panel",toggleable:!0},{header:$(()=>n[25]||(n[25]=[t("div",{class:"flex align-items-center"},[t("i",{class:"pi pi-exclamation-triangle mr-2 text-red-500"}),t("span",{class:"font-semibold"},"Error Count Trend")],-1)])),icons:$(()=>[F(h(p(L),{icon:"pi pi-download",class:"p-button-text p-button-sm",onClick:n[4]||(n[4]=X=>I("error-count"))},null,512),[[d,"Export chart",void 0,{top:!0}]])]),default:$(()=>[t("div",$s,[K.value?(u(),O(p(ut),{key:0,type:"bar",data:K.value,options:ht.value,class:"chart-responsive"},null,8,["data","options"])):(u(),b("div",_s,n[26]||(n[26]=[t("i",{class:"pi pi-exclamation-triangle mr-2"},null,-1),H(" No chart data available ",-1)])))])]),_:1})])]),l.value?(u(),b("div",ks,[t("small",Cs," Last updated: "+f(ot(l.value)),1)])):B("",!0)]))])}}}),Ss=Ct(Ts,[["__scopeId","data-v-c973af45"]]),Bs={class:"author-info"},As={class:"flex align-items-center"},Es={class:"author-avatar mr-3"},Ps=["src","alt"],Ds={key:1,class:"default-avatar"},Ls={class:"author-details"},Rs={class:"author-name text-900 font-medium"},Is=Tt({__name:"AuthorInfo",props:{authorName:{},authorAvatarUrl:{}},setup(a){const e=A(!1),r=()=>{e.value=!0};return(c,m)=>(u(),b("div",Bs,[t("div",As,[t("div",Es,[c.authorAvatarUrl?(u(),b("img",{key:0,src:c.authorAvatarUrl,alt:`${c.authorName} avatar`,class:"avatar-image",onError:r},null,40,Ps)):(u(),b("div",Ds,m[0]||(m[0]=[t("i",{class:"pi pi-user"},null,-1)])))]),t("div",Ls,[t("div",Rs,f(c.authorName||"Unknown Author"),1),m[1]||(m[1]=t("div",{class:"author-label text-600 text-sm"},"Author",-1))])])]))}}),Ns=Ct(Is,[["__scopeId","data-v-91c486e6"]]),Fs={class:"crawler-detail"},Hs={class:"crawler-detail-container"},Us={class:"surface-0 shadow-2 p-3 border-1 border-50 border-round"},Ms={class:"flex align-items-center mb-5"},Os={class:"flex-1"},zs={class:"flex align-items-center"},js={class:"text-900 text-3xl font-medium mr-3"},Ks={class:"text-600 text-xl"},Vs={key:0,class:"flex align-items-center justify-content-center p-6"},Ws={key:1,class:"card"},Js={class:"flex align-items-center"},Ys={class:"text-sm"},qs={class:"text-center mt-3"},Qs={key:2},Zs={class:"grid"},Gs={class:"col-12 lg:col-6"},Xs={class:"card h-full"},ta={key:0,class:"grid"},ea={class:"col-6"},sa={class:"text-900 font-medium"},aa={class:"col-6"},na={class:"text-900 font-medium"},ra={class:"col-6"},ia={class:"text-900 font-medium"},oa={class:"col-6"},la={class:"text-900 font-medium"},ca={class:"col-6"},da={class:"text-900 font-medium"},ua={class:"col-6"},va={class:"flex align-items-center"},pa={key:0,class:"col-12"},ba={class:"col-12 lg:col-6"},fa={class:"card h-full"},ha={key:0,class:"grid"},ma={class:"col-6"},ga={class:"flex align-items-center"},xa={class:"col-6"},ya={class:"text-900 font-medium"},wa={class:"col-12"},$a={class:"text-900 font-medium"},_a={key:0,class:"col-12"},ka={class:"text-900 font-medium"},Ca={class:"col-12"},Ta={class:"card"},Sa={key:0,class:"grid"},Ba={class:"col-12 md:col-4"},Aa={class:"flex align-items-center p-2 surface-100 border-round"},Ea={class:"text-900 text-sm flex-1"},Pa={class:"col-12 md:col-4"},Da={class:"flex align-items-center p-2 surface-100 border-round"},La={class:"text-900 text-sm flex-1"},Ra={class:"col-12 md:col-4"},Ia={class:"flex align-items-center p-2 surface-100 border-round"},Na={class:"text-900 text-sm flex-1"},Fa={key:0,class:"col-12"},Ha={class:"card"},Ua={class:"grid"},Ma={class:"col-12 md:col-6"},Oa={class:"flex align-items-center"},za={class:"col-12 md:col-6"},ja={class:"text-900 font-medium"},Ka={key:0,class:"col-12 md:col-6"},Va={class:"text-900 font-medium"},Wa={class:"col-12 md:col-6"},Ja={class:"text-900 font-medium"},Ya={key:1,class:"col-12"},qa={class:"text-900 font-medium"},Qa={key:2,class:"col-12"},Za={class:"text-900 font-medium"},Ga={key:3,class:"col-12"},Xa={class:"text-900 font-medium"},tn={class:"grid"},en={class:"col-12"},sn={class:"card"},an={class:"col-12"},nn={class:"card"},rn={key:3,class:"text-center mt-4"},on={class:"text-600"},ln=Tt({__name:"CrawlerDetail",props:{id:{}},setup(a){const e=a,r=Yt(),c=qt(),m=A(!0),l=A(!1),x=A(!1),k=A(null),v=A(null),y=A(null),P=A(null),_=A(null),D=A(!1),Y=A("0");let R=null,K=null;const w=T(()=>e.id),q=T(()=>{var o;return((o=v.value)==null?void 0:o.name)||e.id}),bt=T(()=>{var o,i;return(o=v.value)!=null&&o.enabled?D.value?"status-running":((i=y.value)==null?void 0:i.status)==="HEALTHY"?"status-ready":"status-error":"status-disabled"}),ft=T(()=>{var o,i;return(o=v.value)!=null&&o.enabled?D.value?"pi pi-spin pi-spinner":((i=y.value)==null?void 0:i.status)==="HEALTHY"?"pi pi-check":"pi pi-times":"pi pi-ban"}),ht=T(()=>{var o,i;return(o=v.value)!=null&&o.enabled?D.value?"Running":((i=y.value)==null?void 0:i.status)==="HEALTHY"?"Ready":"Error":"Disabled"}),j=T(()=>{if(!y.value)return"warning";switch(y.value.status){case"HEALTHY":return"success";case"UNHEALTHY":return"danger";default:return"warning"}}),mt=T(()=>!y.value||y.value.responseTimeMs===null?"N/A":`${y.value.responseTimeMs}ms`),st=T(()=>{if(!y.value||!y.value.lastCheck)return"Never";const o=new Date(y.value.lastCheck),C=new Date().getTime()-o.getTime(),S=Math.floor(C/1e3),s=Math.floor(S/60);return S<60?`${S}s ago`:s<60?`${s}m ago`:o.toLocaleString()}),gt=T(()=>{if(!P.value)return"Never";const i=new Date().getTime()-P.value.getTime(),C=Math.floor(i/1e3);return C<60?`${C}s ago`:C<3600?`${Math.floor(C/60)}m ago`:P.value.toLocaleString()}),I=()=>{var i,C;const o=((i=v.value)==null?void 0:i.enabled)&&((C=y.value)==null?void 0:C.status)==="HEALTHY";c.setCrawlerDetailActions({onStartCrawl:rt,onHealthCheck:nt,onStatusCheck:V},{canStartCrawl:o,isHealthChecking:l.value,isCrawling:x.value})},at=async()=>{try{D.value=await J.hasRunningJobs(e.id)}catch(o){console.error("Failed to check running jobs:",o),D.value=!1}},Q=async()=>{try{k.value=null,m.value=!0;const[o,i]=await Promise.all([J.getCrawlerConfigurations(),J.getCrawlerHealth(e.id)]);if(v.value=o.find(C=>C.id===e.id)||null,y.value=i,!v.value)throw new Error(`Crawler with ID '${e.id}' not found`);await at(),P.value=new Date,I()}catch(o){console.error("Failed to load crawler details:",o),k.value=o instanceof Error?o.message:"Unknown error occurred",r.add({severity:"error",summary:"Load Error",detail:"Failed to load crawler details",life:5e3})}finally{m.value=!1}},nt=async()=>{l.value=!0,I();try{const o=await J.forceHealthCheck(e.id);y.value=o,P.value=new Date,r.add({severity:"success",summary:"Health Check",detail:`Forced health check for ${q.value}`,life:3e3})}catch(o){console.error("Failed to force health check:",o),r.add({severity:"error",summary:"Error",detail:"Failed to perform health check",life:5e3})}finally{l.value=!1,I()}},U=async o=>{try{await navigator.clipboard.writeText(o),r.add({severity:"success",summary:"Copied",detail:"URL copied to clipboard",life:2e3})}catch(i){console.error("Failed to copy to clipboard:",i),r.add({severity:"error",summary:"Error",detail:"Failed to copy URL",life:3e3})}},rt=async()=>{if(v.value){x.value=!0,I();try{const o=await J.triggerCrawl(e.id);switch(_.value=o,o.status){case"ACCEPTED":D.value=!0,r.add({severity:"success",summary:"Crawl Started",detail:`Crawl initiated successfully for ${q.value}`,life:5e3});break;case"CONFLICT":r.add({severity:"warn",summary:"Crawl Already Running",detail:o.message,life:5e3});break;case"SERVICE_UNAVAILABLE":r.add({severity:"error",summary:"Service Unavailable",detail:o.message,life:5e3});break;case"ERROR":r.add({severity:"error",summary:"Crawl Failed",detail:o.message,life:5e3});break}}catch(o){console.error("Failed to trigger crawl:",o),r.add({severity:"error",summary:"Error",detail:o instanceof Error?o.message:"Failed to trigger crawl",life:5e3})}finally{x.value=!1,I()}}},it=o=>{switch(o){case"ACCEPTED":return"success";case"CONFLICT":return"warning";case"SERVICE_UNAVAILABLE":case"ERROR":return"danger";default:return"info"}},ot=o=>{try{return new Date(o).toLocaleString()}catch{return o}},V=async()=>{try{const o=await J.getCrawlerStatus(e.id);r.add({severity:"info",summary:"Crawl Status",detail:`Current status: ${JSON.stringify(o,null,2)}`,life:8e3})}catch(o){console.error("Failed to check crawl status:",o),r.add({severity:"error",summary:"Error",detail:o instanceof Error?o.message:"Failed to check crawl status",life:5e3})}},xt=o=>{o.crawlerId===e.id&&(y.value={status:o.status,message:o.message,lastCheck:o.timestamp,responseTimeMs:null,crawlerId:o.crawlerId},P.value=new Date)},M=o=>{const i=o.data;if(!(!i||!i.crawlerId)&&i.crawlerId===e.id){switch(o.type){case"job.started":D.value=!0;break;case"job.completed":case"job.failed":case"job.cancelled":at();break}P.value=new Date}},Z=()=>{try{R=new Qt;const o=R.onHealthUpdate(xt),i=R.on("job.started",M),C=R.on("job.completed",M),S=R.on("job.failed",M),s=R.on("job.cancelled",M);K=()=>{o(),i(),C(),S(),s()}}catch(o){console.error("Failed to initialize WebSocket:",o)}};return zt(async()=>{await Q(),Z()}),jt(()=>{K&&K(),R&&R.disconnect(),c.clearContextActions()}),(o,i)=>{const C=pt("tooltip");return u(),b("div",Fs,[t("div",Hs,[t("div",Us,[t("div",Ms,[h(p(L),{icon:"pi pi-arrow-left",class:"p-button-text p-button-plain mr-3",onClick:i[0]||(i[0]=S=>o.$router.push("/"))}),t("div",Os,[t("div",zs,[t("div",js,f(q.value),1),v.value?F((u(),b("div",{key:0,class:N(["status-indicator",bt.value])},[t("i",{class:N(ft.value)},null,2)],2)),[[C,ht.value,void 0,{bottom:!0}]]):B("",!0)]),t("span",Ks,f(w.value),1)])]),m.value?(u(),b("div",Vs,[h(p(Mt)),i[5]||(i[5]=t("span",{class:"ml-3 text-600"},"Loading crawler details...",-1))])):k.value?(u(),b("div",Ws,[h(p(Ot),{severity:"error",closable:!1},{default:$(()=>[t("div",Js,[i[7]||(i[7]=t("i",{class:"pi pi-exclamation-triangle mr-2"},null,-1)),t("div",null,[i[6]||(i[6]=t("div",{class:"font-medium"},"Failed to load crawler details",-1)),t("div",Ys,f(k.value),1)])])]),_:1}),t("div",qs,[h(p(L),{icon:"pi pi-refresh",label:"Retry",onClick:Q})])])):(u(),b("div",Qs,[h(p(Kt),{value:Y.value,"onUpdate:value":i[4]||(i[4]=S=>Y.value=S),class:"crawler-detail-tabs"},{default:$(()=>[h(p(Vt),null,{default:$(()=>{var S;return[h(p(_t),{value:"0"},{default:$(()=>i[8]||(i[8]=[t("i",{class:"pi pi-cog mr-2"},null,-1),t("span",null,"Configuration",-1)])),_:1,__:[8]}),h(p(_t),{value:"1",disabled:!((S=v.value)!=null&&S.enabled)},{default:$(()=>i[9]||(i[9]=[t("i",{class:"pi pi-chart-line mr-2"},null,-1),t("span",null,"Metrics",-1)])),_:1,__:[9]},8,["disabled"])]}),_:1}),h(p(Wt),null,{default:$(()=>[h(p(kt),{value:"0"},{default:$(()=>[t("div",Zs,[t("div",Gs,[t("div",Xs,[i[17]||(i[17]=t("h5",{class:"flex align-items-center"},[t("i",{class:"pi pi-cog mr-2"}),H(" Crawler Details ")],-1)),v.value?(u(),b("div",ta,[t("div",ea,[i[10]||(i[10]=t("div",{class:"text-600 text-sm mb-1"},"Name",-1)),t("div",sa,f(v.value.name),1)]),t("div",aa,[i[11]||(i[11]=t("div",{class:"text-600 text-sm mb-1"},"ID",-1)),t("div",na,f(v.value.id),1)]),t("div",ra,[i[12]||(i[12]=t("div",{class:"text-600 text-sm mb-1"},"Base URL",-1)),t("div",ia,f(v.value.baseUrl),1)]),t("div",oa,[i[13]||(i[13]=t("div",{class:"text-600 text-sm mb-1"},"Port",-1)),t("div",la,f(v.value.port),1)]),t("div",ca,[i[14]||(i[14]=t("div",{class:"text-600 text-sm mb-1"},"Health Endpoint",-1)),t("div",da,f(v.value.healthEndpoint),1)]),t("div",ua,[i[15]||(i[15]=t("div",{class:"text-600 text-sm mb-1"},"Status",-1)),t("div",va,[h(p(wt),{value:v.value.enabled?"Enabled":"Disabled",severity:v.value.enabled?"success":"danger",class:"text-xs"},null,8,["value","severity"])])]),v.value.authorName?(u(),b("div",pa,[i[16]||(i[16]=t("div",{class:"text-600 text-sm mb-2"},"Author",-1)),h(Ns,{"author-name":v.value.authorName,"author-avatar-url":v.value.authorAvatarUrl},null,8,["author-name","author-avatar-url"])])):B("",!0)])):B("",!0)])]),t("div",ba,[t("div",fa,[i[22]||(i[22]=t("h5",{class:"flex align-items-center"},[t("i",{class:"pi pi-heart mr-2"}),H(" Health Status ")],-1)),y.value?(u(),b("div",ha,[t("div",ma,[i[18]||(i[18]=t("div",{class:"text-600 text-sm mb-1"},"Current Status",-1)),t("div",ga,[h(p(wt),{value:y.value.status,severity:j.value,class:"text-xs"},null,8,["value","severity"])])]),t("div",xa,[i[19]||(i[19]=t("div",{class:"text-600 text-sm mb-1"},"Response Time",-1)),t("div",ya,f(mt.value),1)]),t("div",wa,[i[20]||(i[20]=t("div",{class:"text-600 text-sm mb-1"},"Last Check",-1)),t("div",$a,f(st.value),1)]),y.value.message?(u(),b("div",_a,[i[21]||(i[21]=t("div",{class:"text-600 text-sm mb-1"},"Message",-1)),t("div",ka,f(y.value.message),1)])):B("",!0)])):B("",!0)])]),t("div",Ca,[t("div",Ta,[i[26]||(i[26]=t("h5",{class:"flex align-items-center"},[t("i",{class:"pi pi-link mr-2"}),H(" Endpoints ")],-1)),v.value?(u(),b("div",Sa,[t("div",Ba,[i[23]||(i[23]=t("div",{class:"text-600 text-sm mb-2"},"Health Check",-1)),t("div",Aa,[t("span",Ea,f(v.value.baseUrl)+f(v.value.healthEndpoint),1),h(p(L),{icon:"pi pi-copy",class:"p-button-text p-button-sm",onClick:i[1]||(i[1]=S=>U(v.value.baseUrl+v.value.healthEndpoint))})])]),t("div",Pa,[i[24]||(i[24]=t("div",{class:"text-600 text-sm mb-2"},"Crawl Endpoint",-1)),t("div",Da,[t("span",La,f(v.value.baseUrl)+f(v.value.crawlEndpoint),1),h(p(L),{icon:"pi pi-copy",class:"p-button-text p-button-sm",onClick:i[2]||(i[2]=S=>U(v.value.baseUrl+v.value.crawlEndpoint))})])]),t("div",Ra,[i[25]||(i[25]=t("div",{class:"text-600 text-sm mb-2"},"Status Endpoint",-1)),t("div",Ia,[t("span",Na,f(v.value.baseUrl)+f(v.value.statusEndpoint),1),h(p(L),{icon:"pi pi-copy",class:"p-button-text p-button-sm",onClick:i[3]||(i[3]=S=>U(v.value.baseUrl+v.value.statusEndpoint))})])])])):B("",!0)])]),_.value?(u(),b("div",Fa,[t("div",Ha,[i[34]||(i[34]=t("h5",{class:"flex align-items-center"},[t("i",{class:"pi pi-history mr-2"}),H(" Last Crawl Response ")],-1)),t("div",Ua,[t("div",Ma,[i[27]||(i[27]=t("div",{class:"text-600 text-sm mb-1"},"Status",-1)),t("div",Oa,[h(p(wt),{value:_.value.status,severity:it(_.value.status),class:"text-xs"},null,8,["value","severity"])])]),t("div",za,[i[28]||(i[28]=t("div",{class:"text-600 text-sm mb-1"},"Request ID",-1)),t("div",ja,f(_.value.requestId),1)]),_.value.crawlId?(u(),b("div",Ka,[i[29]||(i[29]=t("div",{class:"text-600 text-sm mb-1"},"Crawl ID",-1)),t("div",Va,f(_.value.crawlId),1)])):B("",!0),t("div",Wa,[i[30]||(i[30]=t("div",{class:"text-600 text-sm mb-1"},"Timestamp",-1)),t("div",Ja,f(ot(_.value.timestamp)),1)]),_.value.message?(u(),b("div",Ya,[i[31]||(i[31]=t("div",{class:"text-600 text-sm mb-1"},"Message",-1)),t("div",qa,f(_.value.message),1)])):B("",!0),_.value.suggestion?(u(),b("div",Qa,[i[32]||(i[32]=t("div",{class:"text-600 text-sm mb-1"},"Suggestion",-1)),t("div",Za,f(_.value.suggestion),1)])):B("",!0),_.value.estimatedDuration?(u(),b("div",Ga,[i[33]||(i[33]=t("div",{class:"text-600 text-sm mb-1"},"Estimated Duration",-1)),t("div",Xa,f(_.value.estimatedDuration),1)])):B("",!0)])])])):B("",!0)])]),_:1}),h(p(kt),{value:"1"},{default:$(()=>[t("div",tn,[t("div",en,[t("div",sn,[h(Ss,{"crawler-id":w.value,"auto-refresh":!0,"refresh-interval":3e4},null,8,["crawler-id"])])]),t("div",an,[t("div",nn,[h(ie,{"crawler-id":w.value,"show-pagination":!0,"page-size":10,"auto-refresh":!0,"refresh-interval":3e4},null,8,["crawler-id"])])])])]),_:1})]),_:1})]),_:1},8,["value"])])),P.value?(u(),b("div",rn,[t("small",on," Last updated: "+f(gt.value),1)])):B("",!0)])])])}}}),xn=Ct(ln,[["__scopeId","data-v-d2e2cebf"]]);export{xn as default};
